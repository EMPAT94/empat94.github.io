<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta property="og:title" content="Planning Problem Part 2" />
    <meta property="og:description" content="" />
    
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="Pritesh Tupe's Personal Website" />
    <meta property="og:url" content="https://www.priteshtupe.com/" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: light)"
      content="white" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: dark)"
      content="black" />

    <link rel="canonical" href="https://www.priteshtupe.com/" />
    <link rel="icon" href="/assets/icons/favicon.ico" />
    <link rel="icon" href="/assets/icons/favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="/assets/css/output.css" />

    <script>
      /*
       * Theme toggle (Dark - Light Mode)
       */
      const html = document.documentElement.classList

      if (
        localStorage.theme === "dark" ||
        (!localStorage.theme &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        darkMode()
      }

      function darkMode() {
        html.add("dark")
        localStorage.theme = "dark"
        if (window.REMARK42) window.REMARK42.changeTheme("dark")
      }

      function lightMode() {
        html.remove("dark")
        localStorage.theme = "light"
        localStorage.themeColor = "#ffffff"
        if (window.REMARK42) window.REMARK42.changeTheme("light")
      }

      function toggleTheme() {
        localStorage.theme === "dark" ? lightMode() : darkMode()
      }
    </script>

    <!---->

    
    <title>Planning Problem Part 2 | Pritesh Tupe</title>
    
  </head>

  <body class="bg-slate-50 dark:bg-zinc-900 text-slate-900 dark:text-slate-50">
    <div class="fixed flex flex-row w-full justify-between pt-4 px-4">
  <div class="flex flex-row">
    
    <div
      title="Home"
      class="text-slate-400 hover:text-slate-700 dark:text-slate-700 dark:hover:text-indigo-400 mr-4"
      onclick="window.location.href = '/'">
      <svg width="22" height="22" class="fill-current" viewBox="0 0 16 16">
        <path
          d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5z" />
      </svg>
    </div>
    

    <div
      title="Dark Mode Toggle"
      class="text-slate-400 hover:text-slate-700 dark:text-slate-700 dark:hover:text-indigo-400"
      onclick="toggleTheme()">
      <svg width="24px" height="24px" viewBox="0 0 24 24" class="fill-current">
        <path
          d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8V16Z" />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM12 4V8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16V20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4Z" />
      </svg>
    </div>
  </div>

  <div
    title="Side Menu Toggle"
    class="text-slate-400 hover:text-slate-700 dark:text-slate-700 dark:hover:text-indigo-400"
    onclick="toggleNavBar()">
    <svg class="fill-current" width="24px" height="24px" viewBox="0 0 512 512">
      <path
        d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z" />
    </svg>
  </div>
</div>
 <div
  id="side-nav"
  class="transition-transform fixed hidden h-full w-full m-0 p-0 z-50">
  <div class="flex flex-row">
    <div
      class="w-0 md:w-2/3 md:w-4/5 h-full bg-black opacity-90 fixed left-0"
      onclick="toggleNavBar()"></div>
    <div
      class="p-4 w-full md:w-1/3 md:w-1/5 h-full bg-slate-100 fixed right-0 dark:bg-zinc-900">
      <div
        class="float-right text-slate-400 hover:text-slate-700 dark:hover:text-indigo-400"
        onclick="toggleNavBar()">
        <svg
          width="32"
          height="32"
          class="fill-current fixed right-4 top-4"
          viewBox="0 0 16 16">
          <path
            d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
        </svg>
      </div>
      <div class="prose prose-slate dark:prose-invert prose-xl md:prose-2xl">
        <ul class="list-none max-h-screen overflow-y-scroll pb-8">
          <li><a href="/">Home</a></li>
          <li><a href="/posts">Posts</a></li>
          <li><a href="/notes">Notes</a></li>
          <li><a href="/travels">Travels</a></li>
          <li><a href="/photos">Photos</a></li>
          <li>Web Novels</li>
          <ul class="list-none">
            <li><a href="/foa">Fate of Arda</a></li>
            <li><a href="/gs">Grand Simulation</a></li>
          </ul>
          <li>Projects</li>
          <ul class="list-none">
            <li>
              <a href="https://p-tupe.github.io/creatures" target="_blank"
                >Creatures</a
              >
            </li>
            <li>
              <a href="https://p-tupe.github.io/binary-clock" target="_blank"
                >Binary Clock</a
              >
            </li>
            <li>
              <a href="https://github.com/p-tupe/nvim-rss" target="_blank"
                >Nvim Rss</a
              >
            </li>
            <li>
              <a href="https://p-tupe.github.io/impossible-xo" target="_blank"
                >Impossible XO</a
              >
            </li>
            <li>
              <a href="https://github.com/p-tupe/pingmon" target="_blank"
                >Pingmon</a
              >
            </li>
            <li>
              <a href="https://github.com/p-tupe/zettel-merken" target="_blank"
                >Zettel Merken</a
              >
            </li>
            <li>
              <a href="https://p-tupe.github.io/flashcards" target="_blank"
                >Flashcards</a
              >
            </li>
          </ul>
          <li><a href="/about">About</a></li>
          <li><a href="/feed.xml">Rss</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
 
<div
  class="prose prose-slate dark:prose-invert mx-auto py-16 prose md:prose-lg px-4 md:px-0">
  <div class="text-center">
    <h1>Planning Problem Part 2</h1>
    <h5>December 2015</h5>
  </div>

  <hr />

  <p><em>So, in the last post, we left of with a bit of code that took input for initial_states, actions and a goal. Here on, we will be adding and modifying the same code. Just a warning, it might get too complicated for those who are not familiar with coding. So, let’s go.</em></p>
<h3>Now we need code to input Conditions and Effect for each Action. But how to initialize arrays of those for each Action, and then bind them to that Action so that they could be linked during the processing?</h3>
<p>What I did was to create a new Class OnAction and defined String arrays of Conditions and Effects inside, along with the ability (see Method act() ) to take input (similar to previous arrays).</p>
<p>Code Snippet -</p>
<pre><code class="language-java">class OnAction {

    String[] effects;
    String[] conditions;

    void act() {
        Scanner ent = new Scanner(System.in);
        int n;
        System.out.print(&quot;  Enter number of Conditions : &quot;);
        n = ent.nextInt();
        conditions = new String[n];

        for (int i = 0; i &lt; n; i++) {
            System.out.print(&quot;    Enter Condition &quot; + i + &quot; : &quot;);
            conditions[i] = ent.next();
        }

        System.out.print(&quot;  Enter number of Effects : &quot;);
        n = ent.nextInt();
        effects = new String[n];

        for (int i = 0; i &lt; n; i++) {
            System.out.print(&quot;    Enter Effect &quot; + i + &quot; : &quot;);
            effects[i] = ent.next();
        }
    }

}
</code></pre>
<p>Next, I defined an array of Objects for Class OnAction and initialized it based on the number of Actions provided by the user. Then, for each Action input, I called on OnAction Object so that corresponding Conditions and Effects materialized. Pretty cool huh?</p>
<p>Code Snippet -</p>
<pre><code class="language-java">public class Planning {
    ...
    OnAction a[];
    ...
    void run() {
        ...
        System.out.print(&quot;\nEnter number of Actions : &quot;);
        n = ent.nextInt();
        a = new OnAction[n];
        actions = new String[n];
        ...
        for (int i = 0; i &lt; n; i++) {
            System.out.print(&quot;\n  Enter action &quot; + i + &quot; : &quot;);
            actions[i] = ent.next();
            System.out.println(&quot;  For &quot; + actions[i]);
            a[i] = new OnAction();
            a[i].act();
        }
        ...
  }
</code></pre>
<p>So there we have it, a long darn code just to take a lot of input. As the code currently stands, we can input n number of initial_states, actions, corresponding conditions &amp; effects, and finally, a goal. Yes! With all our inputs in place, now we move to the processing part; the core of our program.</p>
<p>Recall our algorithm (Part 1), We start with the Goal and compare it with the Effects of all Actions. The code would be similar to comparing 2 strings. Let’s see how it’s done.</p>
<p>First, loop through all the Actions (since our Effects are bound to Actions). Since we don’t know the size of Actions array before hand, we use the array.length method to find it at run time. Then, for actions i, we have m effects, which we loop through one by one and check if any equals our Goal.</p>
<p>Code snippet -</p>
<pre><code class="language-java">        int n = actions.length;
        for (int i = 0; i &lt; n; i++) {

            int m = a[i].effects.length;
            for (int j = 0; j &lt; m; j++) {

                if (goal.equals(a[i].effects[j])) {
                    break; //break out of loop when a match is found.
                }
            }
        }
</code></pre>
<p>So now, assume we’ve hit upon an Effect that equals our Goal, what next? Well, just follow the Algorithm -</p>
<p>If a match is found, save the Actions on Stack and Check the Conditions. Now, instead of using stack, I just used another array, and printed it  backwards. Neat trick eh? Hehe, moving on. Define your String array of solutions as a global variable in Planning Class, then save Action i that has an Effect j matching with our Goal into the solutions array.</p>
<p>Code snippet -</p>
<pre><code class="language-java">public class Planning {
    ...
    String[] solution;
    ...
        int n = actions.length;
        for (int i = 0; i &lt; n; i++) {
            int m = a[i].effects.length;
            for (int j = 0; j &lt; m; j++) {
                if (goal.equals(a[i].effects[j])) {
                    solution[c] = actions[i];
                    c += 1;
                    break;
                }
            }
        }
    ...
}
</code></pre>
<p>So now, to check the conditions. We have to check ALL the conditions (unlike Effects, which we loop through only until a hit is found) and see if the Condition is an initial one or an Effect of any other Action. This process continues till we hit upon all Conditions being initial_states, until then, we loop through the Actions. Something beautiful struck your mind? Hell yea, Recursion!</p>
<p>So now, our above code snippet is optimal to check for looping through Actions and checking each Effect; we just change the Goal to the Condition we are searching for. Also, to loop through Conditions, we don’t need additional code; we can fit it right into our earlier snippet. To check in a Condition is in initial_states, i wrote another method named initial.</p>
<p>Code snippet -</p>
<pre><code class="language-java">    void find() {
        int n = actions.length;
        for (int i = 0; i &lt; n; i++) {
            int m = a[i].effects.length;
            int o = a[i].conditions.length;
            for (int j = 0; j &lt; m; j++) {
                if (goal.equals(a[i].effects[j])) {
                    solution[c] = actions[i];
                    c += 1;
                    for (int k = 0; k &lt; o; k++) {
                        if (!initial(a[i].conditions[k])) {
                            goal = a[i].conditions[k];
                            find();
                        }
                    }
                    break;
                }
            }
        }

    }

    boolean initial(String s) {
        for (int i = 0; i &lt; initial_states.length; i++) {
            if (s.equals(initial_states[i])) {
                return true;
            }
        }
        return false;
    }
</code></pre>
<p>So, there we have it, a neat way to implement our algorithm. The output of this will be an array of solutions consisting of sequence of actions required to complete the goal given the initial_states.</p>
<p>BUT WAIT! Where is the code to print the output, you ask? Well, here it is -</p>
<pre><code class="language-java">   void show() {
        System.out.println(&quot;\n\nOutput Sequencce : &quot;);

        for (int i = solution.length - 1; i &gt;= 0; i--) {
            if(solution[i] != null) {
                System.out.println(solution[i]);
            }
        }

    }
</code></pre>
<p>Now, you can link these methods through each other, or just call them one after other from the main using Object p. Also, note that I’ve used if(solution[i] != null) condition while printing. This is because, our solutions array is initialized with the size of actions, but a Goal may require fewer Actions than those given by the user, which means rest of the values in solutions would be null. To avoid printing null, I’ve added that condition. Also, check out the order in which the results are getting printed. They go Forward, from initial_states actions linking to the Goal.</p>
<p>For those stubborn enough to have read till here and wish for more pain… well, here is my entire code for ya’ll kindred spirits ;)</p>
<pre><code class="language-java">/*
 *Class Planning is a simulation on Total 
 *Order Planning Problem solution
 *using backward chaining technique.
 */
package planning;

import java.util.Scanner;

/**
 *
 * @author Pritesh
 */
public class Planning {

    String goal;
    String[] initial_states;
    String[] actions;
    String[] solution;
    OnAction a[];
    int c = 0;

    public static void main(String[] args) {
        Planning p = new Planning();
        p.run();
        p.find();
        p.show();
        System.out.print(&quot;\n\n*** END ***\n&quot;);
        System.exit(0);
    }

    void run() {
        Scanner ent = new Scanner(System.in);
        int n;

        System.out.println(&quot;*** Planning Problem ***&quot;);

        System.out.print(&quot;Enter number of Initial States : &quot;);
        n = ent.nextInt();

        initial_states = new String[n];

        for (int i = 0; i &lt; n; i++) {
            System.out.print(&quot;  Enter Initial States &quot; + i + &quot; : &quot;);
            initial_states[i] = ent.next();
        }

        System.out.print(&quot;\nEnter number of Actions : &quot;);
        n = ent.nextInt();
        a = new OnAction[n];
        actions = new String[n];
        solution = new String[n];

        for (int i = 0; i &lt; n; i++) {
            System.out.print(&quot;\n  Enter action &quot; + i + &quot; : &quot;);
            actions[i] = ent.next();
            System.out.println(&quot;  For &quot; + actions[i]);
            a[i] = new OnAction();
            a[i].act();
        }

        System.out.print(&quot;\nEnter Goal : &quot;);
        goal = ent.next();

    }

    void find() {
        int n = actions.length;
        for (int i = 0; i &lt; n; i++) {
            int m = a[i].effects.length;
            int o = a[i].conditions.length;
            for (int j = 0; j &lt; m; j++) {
                if (goal.equals(a[i].effects[j])) {
                    solution[c] = actions[i];
                    c += 1;
                    for (int k = 0; k &lt; o; k++) {
                        if (!initial(a[i].conditions[k])) {
                            goal = a[i].conditions[k];
                            find();
                        }
                    }
                    break;
                }
            }
        }
    }

    boolean initial(String s) {
        for (int i = 0; i &lt; initial_states.length; i++) {
            if (s.equals(initial_states[i])) {
                return true;
            }
        }
        return false;
    }

    void show() {
        System.out.println(&quot;\n\nOutput Sequencce : &quot;);

        for (int i = solution.length - 1; i &gt;= 0; i--) {
            if (solution[i] != null) {
                System.out.println(solution[i]);
            }
        }
    }
}

class OnAction {

    String[] effects;
    String[] conditions;

    void act() {
        Scanner ent = new Scanner(System.in);
        int n;
        System.out.print(&quot;  Enter number of Conditions : &quot;);
        n = ent.nextInt();
        conditions = new String[n];

        for (int i = 0; i &lt; n; i++) {
            System.out.print(&quot;    Enter Condition &quot; + i + &quot; : &quot;);
            conditions[i] = ent.next();
        }

        System.out.print(&quot;  Enter number of Effects : &quot;);
        n = ent.nextInt();
        effects = new String[n];

        for (int i = 0; i &lt; n; i++) {
            System.out.print(&quot;    Enter Effect &quot; + i + &quot; : &quot;);
            effects[i] = ent.next();
        }
    }
}
</code></pre>
<p><em>I leave the output to you all. Since this program solves any type of planning problem, you can find popular problems on the net or even create your own. Just give it a spin and let me know how you fare. Cheers!</em></p>


  <hr />

  <!---->
     
  <div class="flex flex-col md:flex-row w-full justify-between mt-16">
    
    <a href="/posts/JSON-Manipulation-in-java/">
      <div class="text-slate-500 inline">
  <svg
    width="16"
    height="16"
    class="fill-current inline-block mr-1"
    viewBox="0 0 16 16"
  >
    <path
      fill-rule="evenodd"
      d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"
    />
  </svg>
</div>
 JSON Manipulation In Java
    </a>
     
    <a href="/posts/Planning-Problem-Part-1/">
      Planning Problem using Backward Chaining in Java Part 1 <div class="text-slate-500 inline">
  <svg width="16" height="16" class="fill-current inline-block ml-1" viewBox="0 0 16 16">
    <path
      fill-rule="evenodd"
      d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"
    />
  </svg>
</div>

    </a>
    
  </div>
  

  <hr />

  <div id="remark42"></div>
</div>

<script>
  var remark_config = {
    host: "https://remark42.priteshtupe.com",
    site_id: "priteshtupe-personal-website",
    theme: localStorage.theme,
    show_email_subscription: false,
    show_rss_subscription: false,
    no_footer: true,
    components: ["embed", "last-comments"],
  }

  !(function (e, n) {
    for (var o = 0; o < e.length; o++) {
      var r = n.createElement("script"),
        c = ".js",
        d = n.head || n.body
      "noModule" in r ? ((r.type = "module"), (c = ".mjs")) : (r.async = !0),
        (r.defer = !0),
        (r.src = remark_config.host + "/web/" + e[o] + c),
        d.appendChild(r)
    }
  })(remark_config.components || ["embed"], document)
</script>


    <script defer>
      /*
       * Side Nav Bar Toggle
       */
      const sideNav = document.getElementById("side-nav").classList

      function toggleNavBar() {
        sideNav.contains("hidden") ? showNavBar() : hideNavBar()
      }

      function showNavBar() {
        document.body.style.overflow = "hidden"
        sideNav.remove("hidden")
      }

      function hideNavBar() {
        document.body.style.overflow = "scroll"
        sideNav.add("hidden")
      }
    </script>
  </body>
</html>
