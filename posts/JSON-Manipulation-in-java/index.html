<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta property="og:title" content="JSON Manipulation In Java" />
    <meta property="og:description" content="" />
    
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="Pritesh Tupe's Personal Website" />
    <meta property="og:url" content="https://www.priteshtupe.com/" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: light)"
      content="white" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: dark)"
      content="black" />

    <link rel="canonical" href="https://www.priteshtupe.com/" />
    <link rel="icon" href="/assets/icons/favicon.ico" />
    <link rel="icon" href="/assets/icons/favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="/assets/css/output.css" />

    <script>
      /*
       * Theme toggle (Dark - Light Mode)
       */
      const html = document.documentElement.classList

      if (
        localStorage.theme === "dark" ||
        (!localStorage.theme &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        darkMode()
      }

      function darkMode() {
        html.add("dark")
        localStorage.theme = "dark"
        if (window.REMARK42) window.REMARK42.changeTheme("dark")
      }

      function lightMode() {
        html.remove("dark")
        localStorage.theme = "light"
        localStorage.themeColor = "#ffffff"
        if (window.REMARK42) window.REMARK42.changeTheme("light")
      }

      function toggleTheme() {
        localStorage.theme === "dark" ? lightMode() : darkMode()
      }
    </script>

    <!---->

    
    <title>JSON Manipulation In Java | Pritesh Tupe</title>
    
  </head>

  <body class="bg-slate-50 dark:bg-zinc-900 text-slate-900 dark:text-slate-50">
    <div class="fixed flex flex-row w-full justify-between pt-4 px-4">
  <div class="flex flex-row">
    
    <div
      title="Home"
      class="text-slate-400 hover:text-slate-700 dark:text-slate-700 dark:hover:text-indigo-400 mr-4"
      onclick="window.location.href = '/'">
      <svg width="22" height="22" class="fill-current" viewBox="0 0 16 16">
        <path
          d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5z" />
      </svg>
    </div>
    

    <div
      title="Dark Mode Toggle"
      class="text-slate-400 hover:text-slate-700 dark:text-slate-700 dark:hover:text-indigo-400"
      onclick="toggleTheme()">
      <svg width="24px" height="24px" viewBox="0 0 24 24" class="fill-current">
        <path
          d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8V16Z" />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM12 4V8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16V20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4Z" />
      </svg>
    </div>
  </div>

  <div
    title="Side Menu Toggle"
    class="text-slate-400 hover:text-slate-700 dark:text-slate-700 dark:hover:text-indigo-400"
    onclick="toggleNavBar()">
    <svg class="fill-current" width="24px" height="24px" viewBox="0 0 512 512">
      <path
        d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z" />
    </svg>
  </div>
</div>
 <div
  id="side-nav"
  class="transition-transform fixed hidden h-full w-full m-0 p-0 z-50">
  <div class="flex flex-row">
    <div
      class="w-0 md:w-2/3 md:w-4/5 h-full bg-black opacity-90 fixed left-0"
      onclick="toggleNavBar()"></div>
    <div
      class="p-4 w-full md:w-1/3 md:w-1/5 h-full bg-slate-100 fixed right-0 dark:bg-zinc-900">
      <div
        class="float-right text-slate-400 hover:text-slate-700 dark:hover:text-indigo-400"
        onclick="toggleNavBar()">
        <svg
          width="32"
          height="32"
          class="fill-current fixed right-4 top-4"
          viewBox="0 0 16 16">
          <path
            d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
        </svg>
      </div>
      <div class="prose prose-slate dark:prose-invert prose-xl md:prose-2xl">
        <ul class="list-none max-h-screen overflow-y-scroll pb-8">
          <li><a href="/">Home</a></li>
          <li><a href="/posts">Posts</a></li>
          <li><a href="/notes">Notes</a></li>
          <li><a href="/travels">Travels</a></li>
          <li><a href="/photos">Photos</a></li>
          <li>Web Novels</li>
          <ul class="list-none">
            <li><a href="/foa">Fate of Arda</a></li>
            <li><a href="/gs">Grand Simulation</a></li>
          </ul>
          <li>Projects</li>
          <ul class="list-none">
            <li>
              <a href="https://p-tupe.github.io/creatures" target="_blank"
                >Creatures</a
              >
            </li>
            <li>
              <a href="https://p-tupe.github.io/binary-clock" target="_blank"
                >Binary Clock</a
              >
            </li>
            <li>
              <a href="https://github.com/p-tupe/nvim-rss" target="_blank"
                >Nvim Rss</a
              >
            </li>
            <li>
              <a href="https://p-tupe.github.io/impossible-xo" target="_blank"
                >Impossible XO</a
              >
            </li>
            <li>
              <a href="https://github.com/p-tupe/pingmon" target="_blank"
                >Pingmon</a
              >
            </li>
            <li>
              <a href="https://github.com/p-tupe/zettel-merken" target="_blank"
                >Zettel Merken</a
              >
            </li>
            <li>
              <a href="https://p-tupe.github.io/flashcards" target="_blank"
                >Flashcards</a
              >
            </li>
          </ul>
          <li><a href="/about">About</a></li>
          <li><a href="/feed.xml">Rss</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
 
<div
  class="prose prose-slate dark:prose-invert mx-auto py-16 prose md:prose-lg px-4 md:px-0">
  <div class="text-center">
    <h1>JSON Manipulation In Java</h1>
    <h5>April 2016</h5>
  </div>

  <hr />

  <h2>Prerequisites :</h2>
<ol>
<li>An IDE (I’m doing in Netbeans v8.1)</li>
<li>json simple jar
(Download at <a href="http://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1">http://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1</a>)</li>
<li>Patience</li>
</ol>
<h2>Problem Statement :</h2>
<p>The example I’ve used is extraction of info from Twitter Data-set that was in json format. This is a program similar to a mini project that I once did. The program crawls through each tweet and extracts following entities:</p>
<ol>
<li>Hashtags</li>
<li>Place name</li>
<li>Follower Count</li>
<li>Screen Name</li>
</ol>
<p>These entities are stored in linked-lists and copies of these linked lists are used for processing and information retrieval which consists of :</p>
<ol>
<li>Top n Hashtags that have been tweeted.</li>
<li>Top n Places from where the users have tweeted.</li>
<li>Top n Users (Screen Name) that have most Follower Count</li>
</ol>
<p>Where n is User Defined at Run-Time.</p>
<h2>Code Explanation :</h2>
<h3>Setup</h3>
<p>a. In Netbeans, create a new project and add the jar file by right clicking on “Libraries” and then “Add Jar”</p>
<p>b. import following -</p>
<pre><code class="language-java">import java.io.*;
import java.util.*;
import org.json.simple.*;
import org.json.simple.parser.*;
</code></pre>
<p>Note :- I won’t be explaining the entire code, but just for the hashtag parameter. Rest is easily understandable.</p>
<h3>Create a new JSON Parser object along with variables for parameter processing -</h3>
<pre><code class="language-java">JSONParser parser = new JSONParser();

LinkedList&lt;String&gt; hashtags = new LinkedList();
ArrayList&lt;Integer&gt; count_hash = new ArrayList();
String topHashtags[];
int topHashtagsCount[];
</code></pre>
<h3>Input your file into the parser (File must be filename.json i.e. in pure json format)</h3>
<pre><code class="language-java">JSONArray a = (JSONArray) parser.parse(new FileReader(&quot;src\\bdaminiproject\\twitterData.json&quot;));
</code></pre>
<p>Note :- I’ve initialized a JSONArray to parse the file because all my tweets are objects inside an array.
Like this - [ {tweet1}, {tweet2}, {tweet3}, …, {tweetn} ]</p>
<p>Your json may be just an object instead of array, adjust accordingly.</p>
<h3>Now, for each tweet inside the array, create a new JSONObject of the tweet so as to access the information inside.</h3>
<pre><code class="language-java">for (Object o : a) {
    JSONObject x = (JSONObject) o;
    ...
}
</code></pre>
<h3>Now, to extract information, we must know the structure of our object. My tweet object is like this (note that text is italics is modified to protect privacy) -</h3>
<pre><code class="language-json">{
    ....
    &quot;user&quot;: {
        ...
        &quot;screen_name&quot;: &quot;XYZ&quot;,
          ....
         &quot;followers_count&quot;: 495,
          ....
    },
     ...
    &quot;place&quot;: {
        ...
        &quot;name&quot;: &quot;PQR&quot;,
         ...
    },
     ...
    &quot;entities&quot;: {
        &quot;hashtags&quot;: [&quot;text&quot; : &quot;hashtag&quot;, &quot;text&quot;: &quot;hashtag_2&quot;],
         ...
    },
    ...
}
</code></pre>
<p>So, “hashtags” is an array of values inside object “entities” inside each tweet object x.</p>
<h3>Extract each hashtag and store it in the linked list while adding a new count in arraylist. If the list already contains the hashtag, then increment the corresponding count in arraylist. Given that neither “entities” nor “hashtags” is null.</h3>
<pre><code class="language-java">if (x.get(&quot;entities&quot;) != null) {
    JSONObject entity = (JSONObject) x.get(&quot;entities&quot;);
    if (entity.get(&quot;hashtags&quot;) != null) {
        JSONArray hashtag = (JSONArray) entity.get(&quot;hashtags&quot;);
        for (Object obj : hashtag) {
            JSONObject y = (JSONObject) obj;
            hash = (String) y.get(&quot;text&quot;);
            if (hashtags.contains(hash)) {
                int index = hashtags.indexOf(hash);
                count_hash.set(index, count_hash.get(index) + 1);
            } else {
                hashtags.addLast(hash);
                count_hash.add(1);
            }
        }
    }
}
</code></pre>
<p>a. x = tweet object =&gt; x.get(“entities”) means get entities object from x
b. create  a new JSONObject of “entities”
c. entity = entities object =&gt; entity.get(“hashtags”) means get hashtags array from entity
d. create a new JSONArray of “hashtags”
e. create a JSONObject y of each “text” and get its value using y.get(“text”); notice the casting.
f. if the value doesn’t exist, add it to linkedlist and add a count to arraylist
g. if the value exists, find its index in linkedlist and increment the corresponding index in arraylist.</p>
<h3>To display top n hastags, get user input for n and initialize the above declared top arrays to value n.</h3>
<pre><code class="language-java">System.out.print(&quot;\nGet top n Hashtags, set n to : &quot;);
n = ent.nextInt();
topHashtagsCount = new int[n];
topHashtags = new String[n];
</code></pre>
<h3>Create copies of hashtag and count lists as new linkedlists l and arraylist a</h3>
<pre><code class="language-java">LinkedList l = new LinkedList();
l.addAll(hashtags Linkedlist);
ArrayList a = new ArrayList();
a.addAll(count Arraylist);
</code></pre>
<p>for iterations from 0 to n (Since top n)
a. Get index of max value in arraylist a, add it to topHashtagsCount
b. Get corresponding indexed item (hashtag) from linkedlist l, add it to topHashtags.
c. remove values corresponding to that index from both a and l</p>
<h3>Display arrays topHashtags and topHashtagsCount from 0 to n</h3>
<p>That’s all folks… Simple, right? ;)</p>
<p>To those who just want the code, here it is :</p>
<p>Code :-</p>
<pre><code class="language-java">package bdaminiproject;

import java.io.*;
import java.util.*;
import org.json.simple.*;
import org.json.simple.parser.*;

/**
 *
 * @author Pritesh
 */
public class tweet {

    JSONParser parser = new JSONParser();

    long total = 0;

    LinkedList&lt;String&gt; hashtags = new LinkedList();
    ArrayList&lt;Integer&gt; count_hash = new ArrayList();
    LinkedList&lt;String&gt; placename = new LinkedList();
    ArrayList&lt;Integer&gt; count_place = new ArrayList();
    LinkedList&lt;String&gt; username = new LinkedList();
    ArrayList&lt;String&gt; count_follower = new ArrayList();

    String topHashtags[];
    int topHashtagsCount[];
    String topPlaces[];
    int topPlacesCount[];
    String topUsers[];
    int topFollowersCount[];

    public static void main(String[] args) {

        System.out.println(&quot;\n\n\t\t\t*** TWITTER BDA MINI PROJECT ***\n&quot;);
        tweet t = new tweet();
        t.run();
        t.display();
        System.out.println(&quot;\n\n\t\t\t\t--- END ---\n&quot;);
        System.exit(0);
    }

    void run() {
        System.out.println(&quot;Loading Data, Please Wait...&quot;);
        try {

            JSONArray a = (JSONArray) parser.parse(new FileReader(&quot;src\\bdaminiproject\\twitterData.json&quot;));
            System.out.print(&quot;Data Loaded, Crawling throught it...&quot;);

            String hash;
            String city;

            for (Object o : a) {
                JSONObject x = (JSONObject) o;
                total++;

                if (x.get(&quot;entities&quot;) != null) {
                    JSONObject entity = (JSONObject) x.get(&quot;entities&quot;);
                    if (entity.get(&quot;hashtags&quot;) != null) {
                        JSONArray hashtag = (JSONArray) entity.get(&quot;hashtags&quot;);
                        for (Object obj : hashtag) {
                            JSONObject y = (JSONObject) obj;
                            hash = (String) y.get(&quot;text&quot;);
                            if (hashtags.contains(hash)) {
                                int index = hashtags.indexOf(hash);
                                count_hash.set(index, count_hash.get(index) + 1);
                            } else {
                                hashtags.addLast(hash);
                                count_hash.add(1);
                            }
                        }
                    }
                }

                if (x.get(&quot;place&quot;) != null) {
                    JSONObject place = (JSONObject) x.get(&quot;place&quot;);
                    if (place.get(&quot;name&quot;) != null) {
                        city = (String) place.get(&quot;name&quot;);
                        if (placename.contains(city)) {
                            int index = placename.indexOf(city);
                            count_place.set(index, count_place.get(index) + 1);
                        } else {
                            placename.addLast(city);
                            count_place.add(1);
                        }
                    }
                }

                if (x.get(&quot;user&quot;) != null) {
                    JSONObject user = (JSONObject) x.get(&quot;user&quot;);
                    if (user.get(&quot;followers_count&quot;) != null) {
                        if (!username.contains((String) user.get(&quot;name&quot;))) {
                            username.add((String) user.get(&quot;name&quot;));
                            count_follower.add(user.get(&quot;followers_count&quot;).toString());
                        }
                    }
                }
            }

        } catch (IOException | ParseException e) {
        }

    }

    void getMax(int n, ArrayList aa, LinkedList la, int flag) {
        LinkedList l = new LinkedList();
        l.addAll(la);
        ArrayList a = new ArrayList();
        a.addAll(aa);
        int t = 0;
        int temp = 0, max, index = 0;
        if (n &gt; a.size()) {
            System.out.println(&quot;n is greater tha array size, exiting...&quot;);
            System.exit(0);
        }
        while (t &lt; n) {
            max = 0;
            for (int i = 0; i &lt; a.size(); i++) {
                if (flag == 3) {
                    temp = Integer.parseInt((String) a.get(i));
                } else {
                    temp = (int) a.get(i);
                }
                if (temp &gt; max) {
                    max = temp;
                }
            }
            if (flag == 3) {
                String in = Integer.toString(max);
                index = a.indexOf(in);
            } else {
                index = a.indexOf(max);
            }
            switch (flag) {
                case 1:
                    topHashtagsCount[t] = (int) max;
                    topHashtags[t] = (String) l.get(index);
                    break;
                case 2:
                    topPlacesCount[t] = (int) max;
                    topPlaces[t] = (String) l.get(index);
                    break;
                case 3:
                    topUsers[t] = (String) l.get(index);
                    topFollowersCount[t] = (int) max;
                default:
                    break;
            }

            l.remove(index);
            a.remove(index);
            t++;
        }
    }

    void display() {

        Scanner ent = new Scanner(System.in);
        int n = 1;
        System.out.println(&quot;DONE&quot;);

        System.out.println(&quot;\nTotal Tweets Analyzed = &quot; + total + &quot;\n&quot;);

        while (n != 0) {

            System.out.println(&quot;\n\nTop Categories.... &quot;);

            System.out.print(&quot;\nGet top n Hashtags, set n to : &quot;);
            n = ent.nextInt();
            topHashtagsCount = new int[n];
            topHashtags = new String[n];
            getMax(n, count_hash, hashtags, 1);
            System.out.println(&quot;\n\n\t# Hashtag --&gt; Count\n&quot;);
            for (int i = 0; i &lt; n; i++) {
                System.out.println(&quot;\t&quot; + (i + 1) + &quot;. &quot; + topHashtags[i] + &quot; --&gt; &quot; + topHashtagsCount[i]);
            }

            System.out.print(&quot;\nGet top n Places, set n to : &quot;);
            n = ent.nextInt();
            topPlacesCount = new int[n];
            topPlaces = new String[n];
            getMax(n, count_place, placename, 2);
            System.out.println(&quot;\n\n\t# Place --&gt; Count\n&quot;);
            for (int i = 0; i &lt; n; i++) {
                System.out.println(&quot;\t&quot; + (i + 1) + &quot;. &quot; + topPlaces[i] + &quot; --&gt; &quot; + topPlacesCount[i]);
            }

            System.out.print(&quot;\nGet top n Users with most Followers, set n to : &quot;);
            n = ent.nextInt();
            topFollowersCount = new int[n];
            topUsers = new String[n];
            getMax(n, count_follower, username, 3);
            System.out.println(&quot;\n\n\t# Users --&gt; Followers_Count\n&quot;);
            for (int i = 0; i &lt; n; i++) {
                System.out.println(&quot;\t&quot; + (i + 1) + &quot;. &quot; + topUsers[i] + &quot; --&gt; &quot; + topFollowersCount[i]);
            }

            System.out.print(&quot;\nEnter 0 to Exit, 1 to Re-Enter Top Categories : &quot;);
            n = ent.nextInt();

        }
    }

}
</code></pre>


  <hr />

  <!---->
     
  <div class="flex flex-col md:flex-row w-full justify-between mt-16">
    
    <a href="/posts/Time-Travel/">
      <div class="text-slate-500 inline">
  <svg
    width="16"
    height="16"
    class="fill-current inline-block mr-1"
    viewBox="0 0 16 16"
  >
    <path
      fill-rule="evenodd"
      d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"
    />
  </svg>
</div>
 Time Travel
    </a>
     
    <a href="/posts/Planning-Problem-Part-2/">
      Planning Problem Part 2 <div class="text-slate-500 inline">
  <svg width="16" height="16" class="fill-current inline-block ml-1" viewBox="0 0 16 16">
    <path
      fill-rule="evenodd"
      d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"
    />
  </svg>
</div>

    </a>
    
  </div>
  

  <hr />

  <div id="remark42"></div>
</div>

<script>
  var remark_config = {
    host: "https://remark42.priteshtupe.com",
    site_id: "priteshtupe-personal-website",
    theme: localStorage.theme,
    show_email_subscription: false,
    show_rss_subscription: false,
    no_footer: true,
    components: ["embed", "last-comments"],
  }

  !(function (e, n) {
    for (var o = 0; o < e.length; o++) {
      var r = n.createElement("script"),
        c = ".js",
        d = n.head || n.body
      "noModule" in r ? ((r.type = "module"), (c = ".mjs")) : (r.async = !0),
        (r.defer = !0),
        (r.src = remark_config.host + "/web/" + e[o] + c),
        d.appendChild(r)
    }
  })(remark_config.components || ["embed"], document)
</script>


    <script defer>
      /*
       * Side Nav Bar Toggle
       */
      const sideNav = document.getElementById("side-nav").classList

      function toggleNavBar() {
        sideNav.contains("hidden") ? showNavBar() : hideNavBar()
      }

      function showNavBar() {
        document.body.style.overflow = "hidden"
        sideNav.remove("hidden")
      }

      function hideNavBar() {
        document.body.style.overflow = "scroll"
        sideNav.add("hidden")
      }
    </script>
  </body>
</html>
