<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta property="og:title" content="Notes" />
    <meta property="og:description" content="" />
    
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="Pritesh Tupe's Personal Website" />
    <meta property="og:url" content="https://www.priteshtupe.com/" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: light)"
      content="white" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: dark)"
      content="black" />

    <link rel="canonical" href="https://www.priteshtupe.com/" />
    <link rel="icon" href="/assets/icons/favicon.ico" />
    <link rel="icon" href="/assets/icons/favicon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="/assets/css/output.css" />

    <script>
      /*
       * Theme toggle (Dark - Light Mode)
       */
      const html = document.documentElement.classList

      if (
        localStorage.theme === "dark" ||
        (!localStorage.theme &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        darkMode()
      }

      function darkMode() {
        html.add("dark")
        localStorage.theme = "dark"
        if (window.REMARK42) window.REMARK42.changeTheme("dark")
      }

      function lightMode() {
        html.remove("dark")
        localStorage.theme = "light"
        localStorage.themeColor = "#ffffff"
        if (window.REMARK42) window.REMARK42.changeTheme("light")
      }

      function toggleTheme() {
        localStorage.theme === "dark" ? lightMode() : darkMode()
      }
    </script>

    <!---->

    
    <title>Notes | Pritesh Tupe</title>
    
  </head>

  <body class="bg-slate-50 dark:bg-zinc-900 text-slate-900 dark:text-slate-50">
    <div class="absolute md:fixed flex flex-row w-full justify-between pt-4 px-4">
  <div class="flex flex-row">
    
    <div
      title="Home"
      class="text-slate-400 hover:text-slate-700 dark:text-slate-700 dark:hover:text-indigo-400 mr-4"
      onclick="window.location.href = '/'"
    >
      <svg width="22" height="22" class="fill-current" viewBox="0 0 16 16">
        <path
          d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5z"
        />
      </svg>
    </div>
    

    <div
      title="Dark Mode Toggle"
      class="text-slate-400 hover:text-slate-700 dark:text-slate-700 dark:hover:text-indigo-400"
      onclick="toggleTheme()"
    >
      <svg width="24px" height="24px" viewBox="0 0 24 24" class="fill-current">
        <path
          d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8V16Z"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM12 4V8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16V20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4Z"
        />
      </svg>
    </div>
  </div>

  <div
    title="Side Menu Toggle"
    class="text-slate-400 hover:text-slate-700 dark:text-slate-700 dark:hover:text-indigo-400"
    onclick="toggleNavBar()"
  >
    <svg class="fill-current" width="24px" height="24px" viewBox="0 0 512 512">
      <path
        d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"
      />
    </svg>
  </div>
</div>
 <div
  id="side-nav"
  class="transition-transform fixed hidden h-full w-full m-0 p-0 z-50">
  <div class="flex flex-row">
    <div
      class="w-0 md:w-2/3 lg:w-4/5 h-full bg-black opacity-90 fixed left-0"
      onclick="toggleNavBar()"></div>
    <div
      class="p-4 w-full md:w-1/3 lg:w-1/5 h-full bg-slate-100 fixed right-0 dark:bg-zinc-900">
      <div
        class="float-right text-slate-400 hover:text-slate-700 dark:hover:text-indigo-400"
        onclick="toggleNavBar()">
        <svg
          width="32"
          height="32"
          class="fill-current fixed right-4 top-4"
          viewBox="0 0 16 16">
          <path
            d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
        </svg>
      </div>
      <div class="prose prose-slate dark:prose-invert prose-xl lg:prose-2xl">
        <ul class="list-none max-h-screen overflow-y-scroll pb-8">
          <li><a href="/">Home</a></li>
          <li><a href="/posts">Posts</a></li>
          <li><a href="/notes">Notes</a></li>
          <li>Web Novels</li>
          <ul class="list-none">
            <li><a href="/foa">Fate of Arda</a></li>
            <li><a href="/gs">Grand Simulation</a></li>
          </ul>
          <li>Open Source Projects</li>
          <ul class="list-none">
            <li>
              <a href="https://github.com/EMPAT94/creatures">Creatures</a>
            </li>
            <li>
              <a href="https://github.com/EMPAT94/binary-clock">Binary Clock</a>
            </li>
            <li><a href="https://github.com/EMPAT94/nvim-rss">Nvim Rss</a></li>
            <li>
              <a href="https://github.com/EMPAT94/impossible-xo"
                >Impossible XO</a
              >
            </li>
            <li><a href="https://github.com/EMPAT94/pingmon">Pingmon</a></li>
            <li>
              <a href="https://github.com/EMPAT94/zettel-merken"
                >Zettel Merken</a
              >
            </li>
            <li>
              <a href="https://github.com/EMPAT94/flashcards">Flashcards</a>
            </li>
          </ul>
          <li><a href="/about">About</a></li>
          <li><a href="/feed.xml">Rss</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
 
<div
  class="prose prose-slate dark:prose-invert mx-auto py-16 prose md:prose-lg px-4 md:px-0">
  <h1>Nodejs</h1>
<h2>&quot;main&quot; module</h2>
<p>There is a widly followed convention in python to have a &quot;main&quot; function that is run when the script is called directly via cli: <code>python script.py</code></p>
<pre><code class="language-py">def main():
  pass

if __name__ == &quot;__main__&quot;:
  main()
</code></pre>
<p>A relatively unknown implementation exists for nodejs, like so:</p>
<pre><code class="language-js">function main() {}

if (require.main === module) main();
</code></pre>
<p><span style="color:red;font-weight:bold">IMPORTANT:</span> This only works for single run scripts and commonjs modules! ECMA Style &quot;import&quot; give module as undefined.</p>
<h2>Websocket</h2>
<ul>
<li>low-level interface is net.Socket as an point for tcp connection</li>
</ul>
<h2>Quick Server</h2>
<pre><code class="language-js">require(&quot;http&quot;)
  .createServer((req, res) =&gt; {
    console.log(req.method + &quot;: &quot; + req.url);
    res.end(&quot;OK&quot;);
  })
  .listen(8080);
</code></pre>
<h2>Testing</h2>
<ul>
<li>
<p>A built-in testing framework using TAP format</p>
<pre><code class="language-js">import { describe, it, before, after } from &quot;node:test&quot;;
import { strict as assert } from &quot;node:assert&quot;;

describe(&quot;Test suite 1&quot;, () =&gt; {
  before(&quot;Before the tests&quot;, () =&gt; {});

  after(&quot;After the tests&quot;, () =&gt; {});

  it(&quot;should pass synchronous tests&quot;, (t) =&gt; {
    assert(true);
    // ...
  });

  it(&quot;should also pass async tests&quot;, async (t) =&gt; {
    // ...
  });
});
</code></pre>
</li>
<li>
<p>Use <code>node --test [&lt;file_name&gt;]</code> to run tests. Checks the followings (non-exhaustive list):</p>
<ul>
<li>All <code>*.js</code> files in <code>test/</code> folder</li>
<li>All files starting with <code>test-*.js</code></li>
<li>All files ending with <code>*-test.js</code> or <code>*.test.js</code></li>
</ul>
</li>
</ul>
<h2>Readline</h2>
<blockquote>
<p>The node:readline module provides an interface for reading data from a Readable stream (such as process.stdin or fileReader) one line at a time.</p>
</blockquote>
<ul>
<li>
<p>To create a simple console user input prompt:</p>
<pre><code class="language-js">const readline = require(&quot;node:readline/promises&quot;);
const { stdin: input, stdout: output } = require(&quot;node:process&quot;);

async function main() {
  const rl = readline.createInterface({ input, output });
  const answer = await rl.question(&quot;Gimme some answer: &quot;);
  console.log(`Thank you for your valuable feedback: ${answer}`);
  rl.close();
}

if (require.main === module) main();
</code></pre>
</li>
<li>
<p>To create a simple file processor reading one line at a time:</p>
<pre><code class="language-js">const readline = require(&quot;node:readline/promises&quot;);
const { createReadStream } = require(&quot;node:fs&quot;);

async function main() {
  const input = createReadStream(&quot;input.txt&quot;);
  const rl = readline.createInterface({ input });

  for await (const line of rl) console.log(line);
  rl.close();
}

if (require.main === module) main();
</code></pre>
</li>
<li>
<p>Although it can also be done like so:</p>
<pre><code class="language-js">import { open } from &quot;node:fs/promises&quot;;

const file = await open(&quot;./some/file/to/read&quot;);

for await (const line of file.readLines()) {
  console.log(line);
}
</code></pre>
</li>
</ul>
<h2>About Timers</h2>
<ul>
<li>
<p><a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/">Offical event loop timers doc</a></p>
</li>
<li>
<p><code>process.nextTick(callback)</code> runs callback <strong>immediately</strong> after current synchronous code is done executing. It basically used to turn sync code into async so it follows proper flow. Use with caution as recursive nextTicks could starve the loop.</p>
</li>
<li>
<p><code>setImmediate(callback)</code> runs callback <strong>after</strong> the &quot;polling&quot; phase of the event loop, during a phase called &quot;check&quot;.</p>
</li>
<li>
<p><code>setTimeout(callback)</code> and <code>setInterval(callback)</code> run callback during the &quot;timer&quot; phase of event loop.</p>
</li>
<li>
<p>If both immediate and timeout (with 0 delay) are set in a synchronous context, either of them could run first. If they are set in async context (like inside a callback), then immediate runs first, since &quot;check&quot; phase comes after &quot;poll&quot; while &quot;timer&quot; phase will be first on the next loop.</p>
</li>
<li>
<p>Also, nextTick is actually run literally immediately, during <strong>any</strong> phase of the loop, while setImmediate runs only during check phase. A historical misnomer.</p>
</li>
</ul>
<h2>Worker Threads</h2>
<h2>Measuring Performance</h2>

</div>


    <script defer>
      /*
       * Side Nav Bar Toggle
       */
      const sideNav = document.getElementById("side-nav").classList

      function toggleNavBar() {
        sideNav.contains("hidden") ? showNavBar() : hideNavBar()
      }

      function showNavBar() {
        document.body.style.overflow = "hidden"
        sideNav.remove("hidden")
      }

      function hideNavBar() {
        document.body.style.overflow = "scroll"
        sideNav.add("hidden")
      }
    </script>
  </body>
</html>
